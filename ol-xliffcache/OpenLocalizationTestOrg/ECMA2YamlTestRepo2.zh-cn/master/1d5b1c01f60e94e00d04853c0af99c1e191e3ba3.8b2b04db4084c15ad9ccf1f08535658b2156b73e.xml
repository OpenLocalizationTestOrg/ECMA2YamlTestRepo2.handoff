{"nodes":[{"pos":[468,779],"content":"Represents an abstraction of the caller's context, which provides access to the <xref href=\"Microsoft.SqlServer.Server.SqlPipe\"></xref>, <xref href=\"Microsoft.SqlServer.Server.SqlTriggerContext\"></xref>, and <xref href=\"System.Security.Principal.WindowsIdentity\"></xref> objects. This class cannot be inherited.","needQuote":true,"needEscape":true,"nodes":[{"content":"Represents an abstraction of the caller's context, which provides access to the <bpt id=\"p1\">&lt;xref href=\"Microsoft.SqlServer.Server.SqlPipe\"&gt;</bpt><ept id=\"p1\">&lt;/xref&gt;</ept>, <bpt id=\"p2\">&lt;xref href=\"Microsoft.SqlServer.Server.SqlTriggerContext\"&gt;</bpt><ept id=\"p2\">&lt;/xref&gt;</ept>, and <bpt id=\"p3\">&lt;xref href=\"System.Security.Principal.WindowsIdentity\"&gt;</bpt><ept id=\"p3\">&lt;/xref&gt;</ept> objects.","pos":[0,279],"source":"Represents an abstraction of the caller's context, which provides access to the <xref href=\"Microsoft.SqlServer.Server.SqlPipe\"></xref>, <xref href=\"Microsoft.SqlServer.Server.SqlTriggerContext\"></xref>, and <xref href=\"System.Security.Principal.WindowsIdentity\"></xref> objects."},{"content":"This class cannot be inherited.","pos":[280,311]}]},{"pos":[791,1191],"content":"The SqlContext object can be used to obtain the trigger context (for code executing in a trigger) and the pipe object (when available, such as in stored procedures). It can also be used to obtain a <xref:System.Security.Principal.WindowsIdentity> object that represents the Microsoft Windows identity of the calling client, if the client authenticated with the server using integrated authentication.","needQuote":true,"needEscape":true,"nodes":[{"content":"The SqlContext object can be used to obtain the trigger context (for code executing in a trigger) and the pipe object (when available, such as in stored procedures). It can also be used to obtain a <xref:System.Security.Principal.WindowsIdentity> object that represents the Microsoft Windows identity of the calling client, if the client authenticated with the server using integrated authentication.","pos":[0,400],"nodes":[{"content":"The SqlContext object can be used to obtain the trigger context (for code executing in a trigger) and the pipe object (when available, such as in stored procedures).","pos":[0,165]},{"content":"It can also be used to obtain a &lt;xref:System.Security.Principal.WindowsIdentity&gt; object that represents the Microsoft Windows identity of the calling client, if the client authenticated with the server using integrated authentication.","pos":[166,400],"source":" It can also be used to obtain a <xref:System.Security.Principal.WindowsIdentity> object that represents the Microsoft Windows identity of the calling client, if the client authenticated with the server using integrated authentication."}]}]},{"pos":[2462,2573],"content":"Specifies whether the calling code is running within SQL Server, and if the context connection can be accessed.","needQuote":true,"needEscape":true,"nodes":[{"content":"Specifies whether the calling code is running within SQL Server, and if the context connection can be accessed.","pos":[0,111]}]},{"pos":[2586,3169],"content":"If this property returns false, all the other <xref:Microsoft.SqlServer.Server.SqlContext> members throw an <xref:System.InvalidOperationException> if used.       If this property returns false, any attempt to open a connection object that has \"context connection=true\" in the connection string fails.       This property is read-only.       When using ADO.NET for data-access, if a piece of code may run both inside SQL Server (using common language runtime integration) and outside SQL Server, this property can be used to check whether the context connection is available.","needQuote":false,"needEscape":true,"nodes":[{"content":"If this property returns false, all the other <xref:Microsoft.SqlServer.Server.SqlContext> members throw an <xref:System.InvalidOperationException> if used.       If this property returns false, any attempt to open a connection object that has \"context connection=true\" in the connection string fails.       This property is read-only.       When using ADO.NET for data-access, if a piece of code may run both inside SQL Server (using common language runtime integration) and outside SQL Server, this property can be used to check whether the context connection is available.","pos":[0,575],"nodes":[{"content":"If this property returns false, all the other &lt;xref:Microsoft.SqlServer.Server.SqlContext&gt; members throw an &lt;xref:System.InvalidOperationException&gt; if used.","pos":[0,156],"source":"If this property returns false, all the other <xref:Microsoft.SqlServer.Server.SqlContext> members throw an <xref:System.InvalidOperationException> if used."},{"content":"If this property returns false, any attempt to open a connection object that has \"context connection=true\" in the connection string fails.","pos":[163,301]},{"content":"This property is read-only.","pos":[308,335]},{"content":"When using ADO.NET for data-access, if a piece of code may run both inside SQL Server (using common language runtime integration) and outside SQL Server, this property can be used to check whether the context connection is available.","pos":[342,575]}]}]},{"pos":[3292,3489],"content":"<bpt id=\"p1\">&lt;xref uid=\"langword_csharp_True\" name=\"True\" href=\"\"&gt;</bpt><ept id=\"p1\">&lt;/xref&gt;</ept> if the context connection is available and the other <bpt id=\"p2\">&lt;xref href=\"Microsoft.SqlServer.Server.SqlContext\"&gt;</bpt><ept id=\"p2\">&lt;/xref&gt;</ept> members can be accessed.","needQuote":true,"needEscape":true,"source":"<xref uid=\"langword_csharp_True\" name=\"True\" href=\"\"></xref> if the context connection is available and the other <xref href=\"Microsoft.SqlServer.Server.SqlContext\"></xref> members can be accessed."},{"pos":[3920,4052],"content":"Gets the pipe object that allows the caller to send result sets, messages, and the results of executing commands back to the client.","needQuote":true,"needEscape":true,"nodes":[{"content":"Gets the pipe object that allows the caller to send result sets, messages, and the results of executing commands back to the client.","pos":[0,132]}]},{"pos":[4065,4185],"content":"If invoked from outside SQL Server, a <xref:System.NotSupportedException> is thrown.       This property is read-only.","needQuote":false,"needEscape":true,"nodes":[{"content":"If invoked from outside SQL Server, a <xref:System.NotSupportedException> is thrown.       This property is read-only.","pos":[0,118],"nodes":[{"content":"If invoked from outside SQL Server, a &lt;xref:System.NotSupportedException&gt; is thrown.","pos":[0,84],"source":"If invoked from outside SQL Server, a <xref:System.NotSupportedException> is thrown."},{"content":"This property is read-only.","pos":[91,118]}]}]},{"pos":[4351,4603],"content":"An instance of <bpt id=\"p1\">&lt;xref href=\"Microsoft.SqlServer.Server.SqlPipe\"&gt;</bpt><ept id=\"p1\">&lt;/xref&gt;</ept> if a pipe is available, or <bpt id=\"p2\">&lt;xref uid=\"langword_csharp_null\" name=\"null\" href=\"\"&gt;</bpt><ept id=\"p2\">&lt;/xref&gt;</ept> if called in a context where pipe is not available (for example, in a user-defined function).","needQuote":true,"needEscape":true,"source":"An instance of <xref href=\"Microsoft.SqlServer.Server.SqlPipe\"></xref> if a pipe is available, or <xref uid=\"langword_csharp_null\" name=\"null\" href=\"\"></xref> if called in a context where pipe is not available (for example, in a user-defined function)."},{"pos":[5077,5228],"content":"Gets the trigger context used to provide the caller with information about what caused the trigger to fire, and a map of the columns that were updated.","needQuote":true,"needEscape":true,"nodes":[{"content":"Gets the trigger context used to provide the caller with information about what caused the trigger to fire, and a map of the columns that were updated.","pos":[0,151]}]},{"pos":[5241,5536],"content":"The <xref:Microsoft.SqlServer.Server.SqlTriggerContext> object can only be retrieved from within a common language runtime trigger.       If the TriggerContext property is accessed from outside of SQL Server, a <xref:System.NotSupportedException> is thrown.       This property is read-only.","needQuote":false,"needEscape":true,"nodes":[{"content":"The <xref:Microsoft.SqlServer.Server.SqlTriggerContext> object can only be retrieved from within a common language runtime trigger.       If the TriggerContext property is accessed from outside of SQL Server, a <xref:System.NotSupportedException> is thrown.       This property is read-only.","pos":[0,291],"nodes":[{"content":"The &lt;xref:Microsoft.SqlServer.Server.SqlTriggerContext&gt; object can only be retrieved from within a common language runtime trigger.","pos":[0,131],"source":"The <xref:Microsoft.SqlServer.Server.SqlTriggerContext> object can only be retrieved from within a common language runtime trigger."},{"content":"If the TriggerContext property is accessed from outside of SQL Server, a &lt;xref:System.NotSupportedException&gt; is thrown.","pos":[138,257],"source":"       If the TriggerContext property is accessed from outside of SQL Server, a <xref:System.NotSupportedException> is thrown."},{"content":"This property is read-only.","pos":[264,291]}]}]},{"pos":[5732,5954],"content":"An instance of <bpt id=\"p1\">&lt;xref href=\"Microsoft.SqlServer.Server.SqlTriggerContext\"&gt;</bpt><ept id=\"p1\">&lt;/xref&gt;</ept> if a trigger context is available, or <bpt id=\"p2\">&lt;xref uid=\"langword_csharp_null\" name=\"null\" href=\"\"&gt;</bpt><ept id=\"p2\">&lt;/xref&gt;</ept> if called outside of a trigger invocation.","needQuote":true,"needEscape":true,"source":"An instance of <xref href=\"Microsoft.SqlServer.Server.SqlTriggerContext\"></xref> if a trigger context is available, or <xref uid=\"langword_csharp_null\" name=\"null\" href=\"\"></xref> if called outside of a trigger invocation."},{"pos":[6443,6488],"content":"The Microsoft Windows identity of the caller.","needQuote":true,"needEscape":true,"nodes":[{"content":"The Microsoft Windows identity of the caller.","pos":[0,45]}]},{"pos":[6501,7197],"content":"Common language runtime (CLR) code inside SQL Server is always invoked in the context of the process account. If it is necessary for the code to perform an action using calling user’s identity instead of the SQL Server process identity, then an impersonation token should be obtained through this property. After obtaining the <xref:System.Security.Principal.WindowsIdentity> object, callers can impersonate the client account and perform actions on their behalf.       If invoked from outside SQL Server, a <xref:System.NotSupportedException> is thrown.       Only assemblies marked with `EXTERNAL_ACCESS` or `UNSAFE` permissions can access this property.       This property is read-only.","needQuote":false,"needEscape":true,"nodes":[{"content":"Common language runtime (CLR) code inside SQL Server is always invoked in the context of the process account.","pos":[0,109]},{"content":"If it is necessary for the code to perform an action using calling user’s identity instead of the SQL Server process identity, then an impersonation token should be obtained through this property.","pos":[110,306]},{"content":"After obtaining the &lt;xref:System.Security.Principal.WindowsIdentity&gt; object, callers can impersonate the client account and perform actions on their behalf.","pos":[307,463],"source":" After obtaining the <xref:System.Security.Principal.WindowsIdentity> object, callers can impersonate the client account and perform actions on their behalf."},{"content":"If invoked from outside SQL Server, a &lt;xref:System.NotSupportedException&gt; is thrown.","pos":[470,554],"source":"       If invoked from outside SQL Server, a <xref:System.NotSupportedException> is thrown."},{"content":"Only assemblies marked with <ph id=\"ph1\">`EXTERNAL_ACCESS`</ph> or <ph id=\"ph2\">`UNSAFE`</ph> permissions can access this property.","pos":[561,656],"source":"       Only assemblies marked with `EXTERNAL_ACCESS` or `UNSAFE` permissions can access this property."},{"content":"This property is read-only.","pos":[663,690]}]},{"pos":[7886,8137],"content":"A <bpt id=\"p1\">&lt;xref href=\"System.Security.Principal.WindowsIdentity\"&gt;</bpt><ept id=\"p1\">&lt;/xref&gt;</ept> instance representing the Windows identity of the caller, or <bpt id=\"p2\">&lt;xref uid=\"langword_csharp_null\" name=\"null\" href=\"\"&gt;</bpt><ept id=\"p2\">&lt;/xref&gt;</ept> if the client was authenticated using SQL Server Authentication.","needQuote":true,"needEscape":true,"source":"A <xref href=\"System.Security.Principal.WindowsIdentity\"></xref> instance representing the Windows identity of the caller, or <xref uid=\"langword_csharp_null\" name=\"null\" href=\"\"></xref> if the client was authenticated using SQL Server Authentication."}],"content":"### YamlMime:ManagedReference\nitems:\n- uid: Microsoft.SqlServer.Server.SqlContext\n  id: SqlContext\n  children:\n  - Microsoft.SqlServer.Server.SqlContext.IsAvailable\n  - Microsoft.SqlServer.Server.SqlContext.Pipe\n  - Microsoft.SqlServer.Server.SqlContext.TriggerContext\n  - Microsoft.SqlServer.Server.SqlContext.WindowsIdentity\n  langs:\n  - csharp\n  name: SqlContext\n  nameWithType: SqlContext\n  fullName: Microsoft.SqlServer.Server.SqlContext\n  type: Class\n  summary: Represents an abstraction of the caller's context, which provides access to the <xref href=\"Microsoft.SqlServer.Server.SqlPipe\"></xref>, <xref href=\"Microsoft.SqlServer.Server.SqlTriggerContext\"></xref>, and <xref href=\"System.Security.Principal.WindowsIdentity\"></xref> objects. This class cannot be inherited.\n  remarks: The SqlContext object can be used to obtain the trigger context (for code executing in a trigger) and the pipe object (when available, such as in stored procedures). It can also be used to obtain a <xref:System.Security.Principal.WindowsIdentity> object that represents the Microsoft Windows identity of the calling client, if the client authenticated with the server using integrated authentication.\n  example:\n  - \"The following example creates a new <xref:Microsoft.SqlServer.Server.SqlDataRecord> and its <xref:Microsoft.SqlServer.Server.SqlMetaData>. The example then marks the beginning of a result set using the <xref:Microsoft.SqlServer.Server.SqlPipe.SendResultsStart%2A> method, sends records with example data back to the client using the <xref:Microsoft.SqlServer.Server.SqlPipe.SendResultsRow%2A> method, and marks the end of the result set with the <xref:Microsoft.SqlServer.Server.SqlPipe.SendResultsEnd%2A> method.  \\n  \\n [!code-vb[DataWorks SqlPipe.SendResultsRow#1](~/add/codesnippet/visualbasic/t-microsoft.sqlserver.se_11_1.vb)]\\n [!code-cs[DataWorks SqlPipe.SendResultsRow#1](~/add/codesnippet/csharp/t-microsoft.sqlserver.se_11_1.cs)]\"\n  syntax:\n    content: public sealed class SqlContext\n  inheritance:\n  - System.Object\n  implements: []\n  inheritedMembers: []\n  platform:\n  - net462\n- uid: Microsoft.SqlServer.Server.SqlContext.IsAvailable\n  id: IsAvailable\n  parent: Microsoft.SqlServer.Server.SqlContext\n  langs:\n  - csharp\n  name: IsAvailable\n  nameWithType: SqlContext.IsAvailable\n  fullName: Microsoft.SqlServer.Server.SqlContext.IsAvailable\n  type: Property\n  assemblies:\n  - System.Data\n  namespace: Microsoft.SqlServer.Server\n  summary: Specifies whether the calling code is running within SQL Server, and if the context connection can be accessed.\n  remarks: \"If this property returns false, all the other <xref:Microsoft.SqlServer.Server.SqlContext> members throw an <xref:System.InvalidOperationException> if used.  \\n  \\n If this property returns false, any attempt to open a connection object that has \\\"context connection=true\\\" in the connection string fails.  \\n  \\n This property is read-only.  \\n  \\n When using ADO.NET for data-access, if a piece of code may run both inside SQL Server (using common language runtime integration) and outside SQL Server, this property can be used to check whether the context connection is available.\"\n  syntax:\n    content: public static bool IsAvailable { get; }\n    return:\n      type: System.Boolean\n      description: <xref uid=\"langword_csharp_True\" name=\"True\" href=\"\"></xref> if the context connection is available and the other <xref href=\"Microsoft.SqlServer.Server.SqlContext\"></xref> members can be accessed.\n  overload: Microsoft.SqlServer.Server.SqlContext.IsAvailable*\n  exceptions: []\n  platform:\n  - net462\n- uid: Microsoft.SqlServer.Server.SqlContext.Pipe\n  id: Pipe\n  parent: Microsoft.SqlServer.Server.SqlContext\n  langs:\n  - csharp\n  name: Pipe\n  nameWithType: SqlContext.Pipe\n  fullName: Microsoft.SqlServer.Server.SqlContext.Pipe\n  type: Property\n  assemblies:\n  - System.Data\n  namespace: Microsoft.SqlServer.Server\n  summary: Gets the pipe object that allows the caller to send result sets, messages, and the results of executing commands back to the client.\n  remarks: \"If invoked from outside SQL Server, a <xref:System.NotSupportedException> is thrown.  \\n  \\n This property is read-only.\"\n  syntax:\n    content: public static Microsoft.SqlServer.Server.SqlPipe Pipe { get; }\n    return:\n      type: Microsoft.SqlServer.Server.SqlPipe\n      description: An instance of <xref href=\"Microsoft.SqlServer.Server.SqlPipe\"></xref> if a pipe is available, or <xref uid=\"langword_csharp_null\" name=\"null\" href=\"\"></xref> if called in a context where pipe is not available (for example, in a user-defined function).\n  overload: Microsoft.SqlServer.Server.SqlContext.Pipe*\n  exceptions: []\n  platform:\n  - net462\n- uid: Microsoft.SqlServer.Server.SqlContext.TriggerContext\n  id: TriggerContext\n  parent: Microsoft.SqlServer.Server.SqlContext\n  langs:\n  - csharp\n  name: TriggerContext\n  nameWithType: SqlContext.TriggerContext\n  fullName: Microsoft.SqlServer.Server.SqlContext.TriggerContext\n  type: Property\n  assemblies:\n  - System.Data\n  namespace: Microsoft.SqlServer.Server\n  summary: Gets the trigger context used to provide the caller with information about what caused the trigger to fire, and a map of the columns that were updated.\n  remarks: \"The <xref:Microsoft.SqlServer.Server.SqlTriggerContext> object can only be retrieved from within a common language runtime trigger.  \\n  \\n If the TriggerContext property is accessed from outside of SQL Server, a <xref:System.NotSupportedException> is thrown.  \\n  \\n This property is read-only.\"\n  syntax:\n    content: public static Microsoft.SqlServer.Server.SqlTriggerContext TriggerContext { get; }\n    return:\n      type: Microsoft.SqlServer.Server.SqlTriggerContext\n      description: An instance of <xref href=\"Microsoft.SqlServer.Server.SqlTriggerContext\"></xref> if a trigger context is available, or <xref uid=\"langword_csharp_null\" name=\"null\" href=\"\"></xref> if called outside of a trigger invocation.\n  overload: Microsoft.SqlServer.Server.SqlContext.TriggerContext*\n  exceptions: []\n  platform:\n  - net462\n- uid: Microsoft.SqlServer.Server.SqlContext.WindowsIdentity\n  id: WindowsIdentity\n  parent: Microsoft.SqlServer.Server.SqlContext\n  langs:\n  - csharp\n  name: WindowsIdentity\n  nameWithType: SqlContext.WindowsIdentity\n  fullName: Microsoft.SqlServer.Server.SqlContext.WindowsIdentity\n  type: Property\n  assemblies:\n  - System.Data\n  namespace: Microsoft.SqlServer.Server\n  summary: The Microsoft Windows identity of the caller.\n  remarks: \"Common language runtime (CLR) code inside SQL Server is always invoked in the context of the process account. If it is necessary for the code to perform an action using calling user’s identity instead of the SQL Server process identity, then an impersonation token should be obtained through this property. After obtaining the <xref:System.Security.Principal.WindowsIdentity> object, callers can impersonate the client account and perform actions on their behalf.  \\n  \\n If invoked from outside SQL Server, a <xref:System.NotSupportedException> is thrown.  \\n  \\n Only assemblies marked with `EXTERNAL_ACCESS` or `UNSAFE` permissions can access this property.  \\n  \\n This property is read-only.\"\n  example:\n  - \"The following example shows how to get the Windows identity of the calling client and impersonate the client. See \\\"Impersonation Sample\\\" in SQL Server Books Online for an example of impersonation using the WindowsIdentity property.  \\n  \\n [!code-cs[DataWorks SqlContext.WindowsIdentity Sample#1](~/add/codesnippet/csharp/p-microsoft.sqlserver.se_6_1.cs)]\\n [!code-vb[DataWorks SqlContext.WindowsIdentity Sample#1](~/add/codesnippet/visualbasic/p-microsoft.sqlserver.se_6_1.vb)]\"\n  syntax:\n    content: public static System.Security.Principal.WindowsIdentity WindowsIdentity { get; }\n    return:\n      type: System.Security.Principal.WindowsIdentity\n      description: A <xref href=\"System.Security.Principal.WindowsIdentity\"></xref> instance representing the Windows identity of the caller, or <xref uid=\"langword_csharp_null\" name=\"null\" href=\"\"></xref> if the client was authenticated using SQL Server Authentication.\n  overload: Microsoft.SqlServer.Server.SqlContext.WindowsIdentity*\n  exceptions: []\n  platform:\n  - net462\nreferences:\n- uid: System.Object\n  isExternal: false\n  name: System.Object\n- uid: Microsoft.SqlServer.Server.SqlContext.IsAvailable\n  parent: Microsoft.SqlServer.Server.SqlContext\n  isExternal: false\n  name: IsAvailable\n  nameWithType: SqlContext.IsAvailable\n  fullName: Microsoft.SqlServer.Server.SqlContext.IsAvailable\n- uid: System.Boolean\n  parent: System\n  isExternal: true\n  name: Boolean\n  nameWithType: Boolean\n  fullName: System.Boolean\n- uid: Microsoft.SqlServer.Server.SqlContext.Pipe\n  parent: Microsoft.SqlServer.Server.SqlContext\n  isExternal: false\n  name: Pipe\n  nameWithType: SqlContext.Pipe\n  fullName: Microsoft.SqlServer.Server.SqlContext.Pipe\n- uid: Microsoft.SqlServer.Server.SqlPipe\n  parent: Microsoft.SqlServer.Server\n  isExternal: false\n  name: SqlPipe\n  nameWithType: SqlPipe\n  fullName: Microsoft.SqlServer.Server.SqlPipe\n- uid: Microsoft.SqlServer.Server.SqlContext.TriggerContext\n  parent: Microsoft.SqlServer.Server.SqlContext\n  isExternal: false\n  name: TriggerContext\n  nameWithType: SqlContext.TriggerContext\n  fullName: Microsoft.SqlServer.Server.SqlContext.TriggerContext\n- uid: Microsoft.SqlServer.Server.SqlTriggerContext\n  parent: Microsoft.SqlServer.Server\n  isExternal: false\n  name: SqlTriggerContext\n  nameWithType: SqlTriggerContext\n  fullName: Microsoft.SqlServer.Server.SqlTriggerContext\n- uid: Microsoft.SqlServer.Server.SqlContext.WindowsIdentity\n  parent: Microsoft.SqlServer.Server.SqlContext\n  isExternal: false\n  name: WindowsIdentity\n  nameWithType: SqlContext.WindowsIdentity\n  fullName: Microsoft.SqlServer.Server.SqlContext.WindowsIdentity\n- uid: System.Security.Principal.WindowsIdentity\n  parent: System.Security.Principal\n  isExternal: false\n  name: WindowsIdentity\n  nameWithType: WindowsIdentity\n  fullName: System.Security.Principal.WindowsIdentity\n- uid: Microsoft.SqlServer.Server.SqlContext.IsAvailable*\n  parent: Microsoft.SqlServer.Server.SqlContext\n  isExternal: false\n  name: IsAvailable\n  nameWithType: SqlContext.IsAvailable\n- uid: Microsoft.SqlServer.Server.SqlContext.Pipe*\n  parent: Microsoft.SqlServer.Server.SqlContext\n  isExternal: false\n  name: Pipe\n  nameWithType: SqlContext.Pipe\n- uid: Microsoft.SqlServer.Server.SqlContext.TriggerContext*\n  parent: Microsoft.SqlServer.Server.SqlContext\n  isExternal: false\n  name: TriggerContext\n  nameWithType: SqlContext.TriggerContext\n- uid: Microsoft.SqlServer.Server.SqlContext.WindowsIdentity*\n  parent: Microsoft.SqlServer.Server.SqlContext\n  isExternal: false\n  name: WindowsIdentity\n  nameWithType: SqlContext.WindowsIdentity\n"}