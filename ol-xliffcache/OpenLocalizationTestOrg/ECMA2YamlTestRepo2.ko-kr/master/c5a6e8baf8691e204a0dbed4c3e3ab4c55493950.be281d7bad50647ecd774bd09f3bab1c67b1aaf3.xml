{"nodes":[{"pos":[452,558],"content":"The QueryInterceptorAttribute on a method annotates it as a query interceptor on the specified entity set.","needQuote":true,"needEscape":true,"nodes":[{"content":"The QueryInterceptorAttribute on a method annotates it as a query interceptor on the specified entity set.","pos":[0,106]}]},{"pos":[571,1445],"content":"Entity set-level authorization and validation is implemented by methods annotated with the QueryInterceptorAttribute. [!INCLUDE[ssAstoria](~/add/includes/ssastoria-md.md)]s do not implement security policies but instead provide the infrastructure required for service developers to write their own security rules and business validation.       Entity set access control and validation is enabled through query operations by using query composition. To control entity-based access, implement a method-per-entity set according to the following rules:       The method must have public scope and be annotated with the QueryInterceptorAttribute, taking the name of a entity set as a parameter.       The method must accept no parameters.       The method must return an expression of type `Expression<Func<T, bool>>` that is the filter to be composed for the entity set.","needQuote":false,"needEscape":true,"extradata":"MT","nodes":[{"content":"Entity set-level authorization and validation is implemented by methods annotated with the QueryInterceptorAttribute.","pos":[0,117]},{"content":"<ph id=\"ph1\">[!INCLUDE[ssAstoria](~/add/includes/ssastoria-md.md)]</ph>s do not implement security policies but instead provide the infrastructure required for service developers to write their own security rules and business validation.","pos":[118,337],"source":"[!INCLUDE[ssAstoria](~/add/includes/ssastoria-md.md)]s do not implement security policies but instead provide the infrastructure required for service developers to write their own security rules and business validation."},{"content":"Entity set access control and validation is enabled through query operations by using query composition.","pos":[344,448]},{"content":"To control entity-based access, implement a method-per-entity set according to the following rules:       The method must have public scope and be annotated with the QueryInterceptorAttribute, taking the name of a entity set as a parameter.","pos":[449,689]},{"content":"The method must accept no parameters.","pos":[696,733]},{"content":"The method must return an expression of type <ph id=\"ph1\">`Expression&lt;Func&lt;T, bool&gt;&gt;`</ph> that is the filter to be composed for the entity set.","pos":[740,866],"source":"       The method must return an expression of type `Expression<Func<T, bool>>` that is the filter to be composed for the entity set."}]},{"pos":[3117,3298],"content":"Initializes a new instance of the <bpt id=\"p1\">&lt;xref href=\"System.Data.Services.QueryInterceptorAttribute\"&gt;</bpt><ept id=\"p1\">&lt;/xref&gt;</ept> class for the entity set specified by the <bpt id=\"p2\">&lt;code&gt;</bpt><ph id=\"ph1\">entitySetName</ph><ept id=\"p2\">&lt;/code&gt;</ept> parameter.","needQuote":true,"needEscape":true,"source":"Initializes a new instance of the <xref href=\"System.Data.Services.QueryInterceptorAttribute\"></xref> class for the entity set specified by the <code>entitySetName</code> parameter."},{"pos":[3464,3549],"content":"The name of the entity set that contains the entity to which the interceptor applies.","needQuote":true,"needEscape":true,"nodes":[{"content":"The name of the entity set that contains the entity to which the interceptor applies.","pos":[0,85]}]},{"pos":[4073,4163],"content":"Gets the name of the entity set that contains the entity to which the interceptor applies.","needQuote":true,"needEscape":true,"nodes":[{"content":"Gets the name of the entity set that contains the entity to which the interceptor applies.","pos":[0,90]}]},{"pos":[4281,4390],"content":"A string that indicates the name of the entity set that contains the entity to which the interceptor applies.","needQuote":true,"needEscape":true,"nodes":[{"content":"A string that indicates the name of the entity set that contains the entity to which the interceptor applies.","pos":[0,109]}]}],"content":"### YamlMime:ManagedReference\nitems:\n- uid: System.Data.Services.QueryInterceptorAttribute\n  id: QueryInterceptorAttribute\n  children:\n  - System.Data.Services.QueryInterceptorAttribute.#ctor(System.String)\n  - System.Data.Services.QueryInterceptorAttribute.EntitySetName\n  langs:\n  - csharp\n  name: QueryInterceptorAttribute\n  nameWithType: QueryInterceptorAttribute\n  fullName: System.Data.Services.QueryInterceptorAttribute\n  type: Class\n  summary: The QueryInterceptorAttribute on a method annotates it as a query interceptor on the specified entity set.\n  remarks: \"Entity set-level authorization and validation is implemented by methods annotated with the QueryInterceptorAttribute. [!INCLUDE[ssAstoria](~/add/includes/ssastoria-md.md)]s do not implement security policies but instead provide the infrastructure required for service developers to write their own security rules and business validation.  \\n  \\n Entity set access control and validation is enabled through query operations by using query composition. To control entity-based access, implement a method-per-entity set according to the following rules:  \\n  \\n The method must have public scope and be annotated with the QueryInterceptorAttribute, taking the name of a entity set as a parameter.  \\n  \\n The method must accept no parameters.  \\n  \\n The method must return an expression of type `Expression<Func<T, bool>>` that is the filter to be composed for the entity set.\"\n  example:\n  - \"The following example controls access to the `Customers` entity set. Each `Customer` can only see `Orders` associated with that `Customer`.  \\n  \\n```  \\n[QueryInterceptor(\\\"Orders\\\")]  \\npublic Expression<Func<Order, bool>> FilterOrders()   \\n{  \\n    return o => o.Customer.Name == /* Current principal name. */;  \\n}   \\n  \\n// Insures that the user accessing the customer(s) has the appropriate  \\n// rights as defined in the QueryRules object to access the customer  \\n// resource(s).  \\n  \\n[QueryInterceptor (\\\"Customers\\\")]  \\npublic Expression<Func<Customer, bool>> FilterCustomers()   \\n{  \\n  return c => c.Name == /* Current principal name. */ &&  \\n              this.CurrentDataSource.QueryRules.Contains(  \\n                rule => rule.Name == c.Name &&  \\n                        rule.CustomerAllowedToQuery == true  \\n              );  \\n}  \\n  \\n```\"\n  syntax:\n    content: >-\n      [System.AttributeUsage(System.AttributeTargets.Method, AllowMultiple=true, Inherited=true)]\n\n      public sealed class QueryInterceptorAttribute : Attribute\n  inheritance:\n  - System.Attribute\n  implements: []\n  inheritedMembers: []\n  platform:\n  - net462\n- uid: System.Data.Services.QueryInterceptorAttribute.#ctor(System.String)\n  id: '#ctor(System.String)'\n  parent: System.Data.Services.QueryInterceptorAttribute\n  langs:\n  - csharp\n  name: QueryInterceptorAttribute(String)\n  nameWithType: QueryInterceptorAttribute.QueryInterceptorAttribute(String)\n  fullName: System.Data.Services.QueryInterceptorAttribute.QueryInterceptorAttribute(String)\n  type: Constructor\n  assemblies:\n  - System.Data.Services\n  namespace: System.Data.Services\n  summary: Initializes a new instance of the <xref href=\"System.Data.Services.QueryInterceptorAttribute\"></xref> class for the entity set specified by the <code>entitySetName</code> parameter.\n  syntax:\n    content: public QueryInterceptorAttribute (string entitySetName);\n    parameters:\n    - id: entitySetName\n      type: System.String\n      description: The name of the entity set that contains the entity to which the interceptor applies.\n  overload: System.Data.Services.QueryInterceptorAttribute.#ctor*\n  exceptions: []\n  platform:\n  - net462\n- uid: System.Data.Services.QueryInterceptorAttribute.EntitySetName\n  id: EntitySetName\n  parent: System.Data.Services.QueryInterceptorAttribute\n  langs:\n  - csharp\n  name: EntitySetName\n  nameWithType: QueryInterceptorAttribute.EntitySetName\n  fullName: System.Data.Services.QueryInterceptorAttribute.EntitySetName\n  type: Property\n  assemblies:\n  - System.Data.Services\n  namespace: System.Data.Services\n  summary: Gets the name of the entity set that contains the entity to which the interceptor applies.\n  syntax:\n    content: public string EntitySetName { get; }\n    return:\n      type: System.String\n      description: A string that indicates the name of the entity set that contains the entity to which the interceptor applies.\n  overload: System.Data.Services.QueryInterceptorAttribute.EntitySetName*\n  exceptions: []\n  platform:\n  - net462\nreferences:\n- uid: System.Attribute\n  isExternal: false\n  name: System.Attribute\n- uid: System.Data.Services.QueryInterceptorAttribute.#ctor(System.String)\n  parent: System.Data.Services.QueryInterceptorAttribute\n  isExternal: false\n  name: QueryInterceptorAttribute(String)\n  nameWithType: QueryInterceptorAttribute.QueryInterceptorAttribute(String)\n  fullName: System.Data.Services.QueryInterceptorAttribute.QueryInterceptorAttribute(String)\n- uid: System.String\n  parent: System\n  isExternal: true\n  name: String\n  nameWithType: String\n  fullName: System.String\n- uid: System.Data.Services.QueryInterceptorAttribute.EntitySetName\n  parent: System.Data.Services.QueryInterceptorAttribute\n  isExternal: false\n  name: EntitySetName\n  nameWithType: QueryInterceptorAttribute.EntitySetName\n  fullName: System.Data.Services.QueryInterceptorAttribute.EntitySetName\n- uid: System.Data.Services.QueryInterceptorAttribute.#ctor*\n  parent: System.Data.Services.QueryInterceptorAttribute\n  isExternal: false\n  name: QueryInterceptorAttribute\n  nameWithType: QueryInterceptorAttribute.QueryInterceptorAttribute\n- uid: System.Data.Services.QueryInterceptorAttribute.EntitySetName*\n  parent: System.Data.Services.QueryInterceptorAttribute\n  isExternal: false\n  name: EntitySetName\n  nameWithType: QueryInterceptorAttribute.EntitySetName\n"}